<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap");
      body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding: 0;
        background-color: white;
        text-align: center;
      }
      .image-container {
        position: relative;
        width: auto;
        height: auto; /* Adjust as needed */
        display: flex;
        justify-content: center;
        align-items: center;
      }

      img {
        max-width: 100%;
        height: auto;
      }

      h2 {
        font-family: "Karla", sans-serif;
      }

      .custom-image11 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: -300px;
      }

      .custom-image12 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: -300px;
      }
      .custom-image13 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: -300px;
      }
      .custom-image14 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: -300px;
      }

      .custom-image21 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: -195px;
      }
      .custom-image22 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: -195px;
      }
      .custom-image23 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: -195px;
      }
      .custom-image24 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: -195px;
      }

      .custom-image31 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: -100px;
      }
      .custom-image32 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: -100px;
      }
      .custom-image33 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: -100px;
      }
      .custom-image34 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: -100px;
      }

      .custom-image41 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: -15px;
      }
      .custom-image42 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: -15px;
      }
      .custom-image43 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: -15px;
      }
      .custom-image44 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: -15px;
      }

      .custom-image51 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 70px;
      }
      .custom-image52 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 70px;
      }
      .custom-image53 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 70px;
      }
      .custom-image54 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 70px;
      }

      .custom-image61 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 155px;
      }
      .custom-image62 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 155px;
      }
      .custom-image63 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 155px;
      }
      .custom-image64 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 155px;
      }

      .custom-image71 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 240px;
      }
      .custom-image72 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 240px;
      }
      .custom-image73 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 240px;
      }
      .custom-image74 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 240px;
      }

      .custom-image81 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 325px;
      }
      .custom-image82 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 325px;
      }
      .custom-image83 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 325px;
      }
      .custom-image84 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 325px;
      }

      .custom-image91 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 410px;
      }
      .custom-image92 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 410px;
      }
      .custom-image93 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 410px;
      }
      .custom-image94 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 410px;
      }

      .custom-image101 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image102 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image103 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image104 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 620px;
      }

      .custom-image105 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 20.5px; /* Move seat down */
        margin-left: 620px;
      }

      .custom-image111 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -105px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image112 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: -47px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image113 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 85px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image114 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 143px; /* Move seat down */
        margin-left: 620px;
      }
      .custom-image115 {
        position: absolute;
        top: auto; /* Moves it 33% down from the container’s top */
        left: auto; /* Moves it 50% from the left */
        transform: translate(-50%, -50%); /* Centers the element */
        width: 25px;
        margin-top: 20.5px; /* Move seat down */
        margin-left: 620px;
      }
      .topnav {
        overflow: hidden;
        background-color: #333;
        font-family: "Karla", sans-serif;
        display: flex;
        align-items: center;
        padding: 10px;
      }
      .topnav img {
        height: 70px;
        width: 100px;
        margin-right: 15px;
      }
      .topnav a {
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
      }
      .topnav a:hover {
        background-color: #ddd;
        color: black;
      }
      .topnav a.split {
        margin-left: auto;
        background-color: #04aa6d;
        color: white;
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Karla:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="topnav">
      <img src="images/logo.png" alt="Logo" />

      <a href="index.html">Home</a>
      <a href="aboutus.html">About Us</a>
      <a href="prob.html" class="split">Contact Us</a>
    </div>

    <br />
    <br />
    <br />

    <div class="image-container">
      <img src="images/bus.jpg" alt="Bus Image" />
      <img
        id="11"
        src="images/CHAIRB.jpg"
        class="custom-image11"
        alt="Seat Image"
      />
      <img
        id="12"
        src="images/CHAIRB.jpg"
        class="custom-image12"
        alt="Seat Image"
      />
      <img
        id="13"
        src="images/CHAIRB.jpg"
        class="custom-image13"
        alt="Seat Image"
      />
      <img
        id="14"
        src="images/CHAIRB.jpg"
        class="custom-image14"
        alt="Seat Image"
      />

      <img
        id="21"
        src="images/CHAIRB.jpg"
        class="custom-image21"
        alt="Seat Image"
      />
      <img
        id="22"
        src="images/CHAIRB.jpg"
        class="custom-image22"
        alt="Seat Image"
      />
      <img
        id="23"
        src="images/CHAIRB.jpg"
        class="custom-image23"
        alt="Seat Image"
      />
      <img
        id="24"
        src="images/CHAIRB.jpg"
        class="custom-image24"
        alt="Seat Image"
      />

      <img
        id="31"
        src="images/CHAIRB.jpg"
        class="custom-image31"
        alt="Seat Image"
      />
      <img
        id="32"
        src="images/CHAIRB.jpg"
        class="custom-image32"
        alt="Seat Image"
      />
      <img
        id="33"
        src="images/CHAIRB.jpg"
        class="custom-image33"
        alt="Seat Image"
      />
      <img
        id="34"
        src="images/CHAIRB.jpg"
        class="custom-image34"
        alt="Seat Image"
      />

      <img
        id="41"
        src="images/CHAIRB.jpg"
        class="custom-image41"
        alt="Seat Image"
      />
      <img
        id="42"
        src="images/CHAIRB.jpg"
        class="custom-image42"
        alt="Seat Image"
      />
      <img
        id="43"
        src="images/CHAIRB.jpg"
        class="custom-image43"
        alt="Seat Image"
      />
      <img
        id="44"
        src="images/CHAIRB.jpg"
        class="custom-image44"
        alt="Seat Image"
      />

      <img
        id="51"
        src="images/CHAIRB.jpg"
        class="custom-image51"
        alt="Seat Image"
      />
      <img
        id="52"
        src="images/CHAIRB.jpg"
        class="custom-image52"
        alt="Seat Image"
      />
      <img
        id="53"
        src="images/CHAIRB.jpg"
        class="custom-image53"
        alt="Seat Image"
      />
      <img
        id="54"
        src="images/CHAIRB.jpg"
        class="custom-image54"
        alt="Seat Image"
      />

      <img
        id="61"
        src="images/CHAIRB.jpg"
        class="custom-image61"
        alt="Seat Image"
      />
      <img
        id="62"
        src="images/CHAIRB.jpg"
        class="custom-image62"
        alt="Seat Image"
      />
      <img
        id="63"
        src="images/CHAIRB.jpg"
        class="custom-image63"
        alt="Seat Image"
      />
      <img
        id="64"
        src="images/CHAIRB.jpg"
        class="custom-image64"
        alt="Seat Image"
      />

      <img
        id="71"
        src="images/CHAIRB.jpg"
        class="custom-image71"
        alt="Seat Image"
      />
      <img
        id="72"
        src="images/CHAIRB.jpg"
        class="custom-image72"
        alt="Seat Image"
      />
      <img
        id="73"
        src="images/CHAIRB.jpg"
        class="custom-image73"
        alt="Seat Image"
      />
      <img
        id="74"
        src="images/CHAIRB.jpg"
        class="custom-image74"
        alt="Seat Image"
      />

      <img
        id="81"
        src="images/CHAIRB.jpg"
        class="custom-image81"
        alt="Seat Image"
      />
      <img
        id="82"
        src="images/CHAIRB.jpg"
        class="custom-image82"
        alt="Seat Image"
      />
      <img
        id="83"
        src="images/CHAIRB.jpg"
        class="custom-image83"
        alt="Seat Image"
      />
      <img
        id="84"
        src="images/CHAIRB.jpg"
        class="custom-image84"
        alt="Seat Image"
      />

      <img
        id="91"
        src="images/CHAIRB.jpg"
        class="custom-image91"
        alt="Seat Image"
      />
      <img
        id="92"
        src="images/CHAIRB.jpg"
        class="custom-image92"
        alt="Seat Image"
      />

      <img
        id="101"
        src="images/CHAIRB.jpg"
        class="custom-image101"
        alt="Seat Image"
      />
      <img
        id="102"
        src="images/CHAIRB.jpg"
        class="custom-image102"
        alt="Seat Image"
      />
      <img
        id="103"
        src="images/CHAIRB.jpg"
        class="custom-image103"
        alt="Seat Image"
      />
      <img
        id="104"
        src="images/CHAIRB.jpg"
        class="custom-image104"
        alt="Seat Image"
      />
      <img
        id="105"
        src="images/CHAIRB.jpg"
        class="custom-image105"
        alt="Seat Image"
      />
    </div>

    <h1>Afternoon Bus</h1>
    <pre id="output"></pre>
    <!-- This is where JSON will be displayed -->

    <script></script>
    <script type="module" src="./supaBaseClient.js"></script>
    <script type="module">
      async function main() {
        const seats = await getData(); // Fetch all seat data from Supabase
        console.log(seats); // ✅ Debugging: Check what data is received

        const seatIdMap = {
          oneone: "11",
          onetwo: "12",
          onethree: "13",
          onefour: "14",
          twoone: "21",
          twotwo: "22",
          twothree: "23",
          twofour: "24",
          threeone: "31",
          threetwo: "32",
          threethree: "33",
          threefour: "34",
          fourone: "41",
          fourtwo: "42",
          fourthree: "43",
          fourfour: "44",
          fiveone: "51",
          fivetwo: "52",
          fivethree: "53",
          fivefour: "54",
          sixone: "61",
          sixtwo: "62",
          sixthree: "63",
          sixfour: "64",
          sevenone: "71",
          seventwo: "72",
          seventhree: "73",
          sevenfour: "74",
          eightone: "81",
          eighttwo: "82",
          eightthree: "83",
          eightfour: "84",
          nineone: "91",
          ninetwo: "92",
          tenone: "101",
          tentwo: "102",
          tenthree: "103",
          tenfour: "104",
          tenfive: "105",
        };

        seats.forEach((seat) => {
          const imageId = seatIdMap[seat.seat_number]; // Get the corresponding HTML id
          if (imageId) {
            const imgElement = document.getElementById(imageId);
            if (imgElement) {
              imgElement.src = seat.status
                ? "images/CHAIRG.JPG"
                : "images/CHAIRR.JPG";
            } else {
              console.warn(`No element found with ID: ${imageId}`);
            }
          } else {
            console.warn(
              `No mapping found for seat_number: ${seat.seat_number}`
            );
          }
        });
      }

      // Call the function when the script loads
      import supabase from "./supaBaseClient.js";
      console.log("Supabase Client:", supabase);
      console.log("Script Loaded");

      async function getData() {
        let { data, error } = await supabase.from("seats").select("*");

        if (error) {
          console.error("Error fetching seat data:", error);
          return [];
        }

        console.log("Fetched seat data:", data);
        return data;
      }

      async function fetchSeatData() {
        const seats = await getData(); // ✅ Fetch seat data

        seats.forEach((seat) => {
          const seatId = seatIdMap[seat.seat_number]; // ✅ Map seat_number to HTML ID

          if (seatId) {
            const seatElement = document.getElementById(seatId);
            if (seatElement) {
              seatElement.src = seat.status
                ? "images/CHAIRG.JPG"
                : "images/CHAIRR.JPG";
            } else {
              console.warn(`No element found with ID: ${seatId}`);
            }
          } else {
            console.warn(
              `No mapping found for seat_number: ${seat.seat_number}`
            );
          }
        });
      }

      function subscribeToSeatUpdates() {
        supabase
          .channel("seats")
          .on(
            "postgres_changes",
            { event: "UPDATE", schema: "public", table: "seats" },
            (payload) => {
              console.log("Seat updated:", payload.new);
              let seatElement = document.getElementById(
                payload.new.seat_number
              );
              if (seatElement) {
                seatElement.src = payload.new.status
                  ? "images/CHAIRR.JPG"
                  : "images/CHAIRG.JPG";
              }
            }
          )
          .subscribe();
      }

      document.addEventListener("DOMContentLoaded", () => {
        fetchSeatData();
        subscribeToSeatUpdates();
      });
      window.fetchSeatData = fetchSeatData;

      main();
    </script>

    <script src="https://unpkg.com/@supabase/supabase-js"></script>
  </body>
</html>
